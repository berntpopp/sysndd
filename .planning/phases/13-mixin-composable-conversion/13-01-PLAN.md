---
phase: 13-mixin-composable-conversion
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/composables/useColorAndSymbols.js
  - app/src/composables/useText.js
  - app/src/composables/useScrollbar.js
  - app/src/composables/index.js
autonomous: true

must_haves:
  truths:
    - "useColorAndSymbols returns all style and icon mappings"
    - "useText returns all text label mappings"
    - "useScrollbar provides updateScrollbar function"
    - "All composables can be imported from composables/index.js"
  artifacts:
    - path: "app/src/composables/useColorAndSymbols.js"
      provides: "Style and symbol constant mappings"
      exports: ["useColorAndSymbols"]
    - path: "app/src/composables/useText.js"
      provides: "Text label constant mappings"
      exports: ["useText"]
    - path: "app/src/composables/useScrollbar.js"
      provides: "Scrollbar update utility"
      exports: ["useScrollbar"]
    - path: "app/src/composables/index.js"
      provides: "Barrel export for all composables"
      contains: "export { default as useColorAndSymbols }"
  key_links:
    - from: "app/src/composables/index.js"
      to: "all individual composables"
      via: "re-export pattern"
      pattern: "export \\{ default as"
---

<objective>
Create independent composables (useColorAndSymbols, useText, useScrollbar) and set up the composables barrel export.

Purpose: Establish the composable foundation with the simplest conversions (stateless, no external dependencies). These composables return constant data and helper functions, making them ideal starting points.

Output: Three composables following Vue 3 patterns, re-exported from composables/index.js
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-mixin-composable-conversion/13-CONTEXT.md
@.planning/phases/13-mixin-composable-conversion/13-RESEARCH.md

# Source mixins to convert
@app/src/assets/js/mixins/colorAndSymbolsMixin.js
@app/src/assets/js/mixins/textMixin.js
@app/src/assets/js/mixins/scrollbarMixin.js

# Existing composables as pattern reference
@app/src/composables/useToastNotifications.js
@app/src/composables/useModalControls.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create useColorAndSymbols composable</name>
  <files>app/src/composables/useColorAndSymbols.js</files>
  <action>
Convert colorAndSymbolsMixin to useColorAndSymbols composable:

1. Create useColorAndSymbols.js with default export function
2. Return plain object containing all style and icon mappings from the mixin's data():
   - stoplights_style, saved_style, review_style, status_style, header_style
   - ndd_icon, ndd_icon_style, problematic_style, problematic_symbol
   - user_approval_style, yn_icon, yn_icon_style, publication_style
   - modifier_style, user_icon, user_style, data_age_style, category_style

3. No reactive state needed (these are constant mappings)
4. Add JSDoc comment matching existing composable style
5. Follow pattern from useToastNotifications.js (default export function returning object)

Pattern:
```javascript
export default function useColorAndSymbols() {
  const stoplights_style = { ... };
  // ... other mappings
  return { stoplights_style, ... };
}
```
  </action>
  <verify>File exists at app/src/composables/useColorAndSymbols.js and exports default function</verify>
  <done>useColorAndSymbols.js created with all style/icon mappings from colorAndSymbolsMixin</done>
</task>

<task type="auto">
  <name>Task 2: Create useText composable</name>
  <files>app/src/composables/useText.js</files>
  <action>
Convert textMixin to useText composable:

1. Create useText.js with default export function
2. Return plain object containing all text label mappings from the mixin's data():
   - ndd_icon_text, publication_hover_text, modifier_text
   - inheritance_short_text, inheritance_overview_text, inheritance_link
   - empty_table_text, data_age_text

3. No reactive state needed (these are constant text mappings)
4. Add JSDoc comment

Pattern:
```javascript
export default function useText() {
  const ndd_icon_text = { ... };
  // ... other text mappings
  return { ndd_icon_text, ... };
}
```
  </action>
  <verify>File exists at app/src/composables/useText.js and exports default function</verify>
  <done>useText.js created with all text label mappings from textMixin</done>
</task>

<task type="auto">
  <name>Task 3: Create useScrollbar composable and update barrel export</name>
  <files>app/src/composables/useScrollbar.js, app/src/composables/index.js</files>
  <action>
1. Create useScrollbar.js composable:
   - Convert scrollbarMixin's updateScrollbar method
   - Accept optional scrollRef parameter for the target element
   - Use nextTick from Vue for DOM updates
   - Note: This mixin is currently unused but convert for completeness

Pattern:
```javascript
import { nextTick } from 'vue';

export default function useScrollbar() {
  const updateScrollbar = async (scrollRef) => {
    await nextTick();
    if (scrollRef && scrollRef.value) {
      scrollRef.value.update();
    }
  };
  return { updateScrollbar };
}
```

2. Create/update app/src/composables/index.js barrel export:
   - Export all new composables: useColorAndSymbols, useText, useScrollbar
   - Include existing composables: useToastNotifications, useModalControls
   - Use consistent re-export pattern

Pattern:
```javascript
// Independent composables (Phase 13)
export { default as useColorAndSymbols } from './useColorAndSymbols';
export { default as useText } from './useText';
export { default as useScrollbar } from './useScrollbar';

// Existing composables (Phase 11)
export { default as useToastNotifications } from './useToastNotifications';
export { default as useModalControls } from './useModalControls';
```
  </action>
  <verify>
- useScrollbar.js exists and exports updateScrollbar function
- index.js exports all 5 composables
- Run: `node -e "const m = require('./app/src/composables/index.js'); console.log(Object.keys(m))"` (may need esm workaround)
  </verify>
  <done>useScrollbar.js created, index.js updated with barrel exports for all composables</done>
</task>

</tasks>

<verification>
1. All three new composable files exist:
   - app/src/composables/useColorAndSymbols.js
   - app/src/composables/useText.js
   - app/src/composables/useScrollbar.js

2. index.js exports all composables (5 total)

3. Build succeeds: `cd app && npm run build` (no import errors)

4. Quick smoke test:
```javascript
// In browser console or test file
import { useColorAndSymbols, useText, useScrollbar } from '@/composables';
const { stoplights_style } = useColorAndSymbols();
console.log(stoplights_style.Definitive); // Should be 'success'
```
</verification>

<success_criteria>
- Three independent composables created following Vue 3 patterns
- All composables export default functions returning plain objects
- Barrel export (index.js) includes all 5 composables
- Build succeeds with no errors
- Composables match original mixin data exactly
</success_criteria>

<output>
After completion, create `.planning/phases/13-mixin-composable-conversion/13-01-SUMMARY.md`
</output>
