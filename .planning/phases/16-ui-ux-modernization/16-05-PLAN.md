---
phase: 16-ui-ux-modernization
plan: 05
type: execute
wave: 3
depends_on: ["16-01", "16-02"]
files_modified:
  - app/src/components/ui/LoadingSkeleton.vue
  - app/src/components/ui/TableSkeleton.vue
  - app/src/components/ui/EmptyState.vue
  - app/src/assets/scss/components/_loading.scss
  - app/src/assets/scss/custom.scss
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Loading skeleton components exist for table and generic content"
    - "Skeleton has subtle shimmer animation"
    - "Empty state component shows icon, message, and optional action"
    - "Shimmer animation respects prefers-reduced-motion"
  artifacts:
    - path: "app/src/components/ui/LoadingSkeleton.vue"
      provides: "Generic loading skeleton component"
      min_lines: 20
    - path: "app/src/components/ui/TableSkeleton.vue"
      provides: "Table-specific loading skeleton"
      min_lines: 30
    - path: "app/src/components/ui/EmptyState.vue"
      provides: "Empty state with icon and message"
      min_lines: 30
  key_links:
    - from: "app/src/components/ui/LoadingSkeleton.vue"
      to: "_loading.scss"
      via: "CSS classes"
      pattern: "skeleton-shimmer"
---

<objective>
Create loading skeleton and empty state components for data-heavy views.

Purpose: Per CONTEXT.md: "Loading indicators: minimal layout shift and instant-feeling feedback", "Empty states: Illustration + guidance approach using icon-based compositions from Bootstrap Icons", "Empty state messaging: Neutral informative tone".

Output: Vue components for loading skeletons (generic and table-specific) and empty states that replace BSpinner for a more polished loading experience.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-ui-ux-modernization/16-CONTEXT.md
@.planning/phases/16-ui-ux-modernization/16-RESEARCH.md
@.planning/phases/16-ui-ux-modernization/16-01-SUMMARY.md
@.planning/phases/16-ui-ux-modernization/16-02-SUMMARY.md
@app/src/components/tables/TablesGenes.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create loading skeleton components and SCSS</name>
  <files>
    app/src/components/ui/LoadingSkeleton.vue
    app/src/components/ui/TableSkeleton.vue
    app/src/assets/scss/components/_loading.scss
    app/src/assets/scss/custom.scss
  </files>
  <action>
    Create `app/src/components/ui/` directory if not exists.

    1. Create `_loading.scss` with skeleton styles:
       - .skeleton-shimmer with gradient animation
       - background: linear-gradient(90deg, #e9ecef 0%, #f8f9fa 50%, #e9ecef 100%)
       - animation: shimmer 1.5s infinite
       - @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
       - @media (prefers-reduced-motion: reduce) { animation: none; background: #e9ecef; }

    2. Create `LoadingSkeleton.vue`:
       - Props: width (string, default '100%'), height (string, default '1rem'), rounded (boolean, default true)
       - Template: div with .skeleton-shimmer class
       - Applies border-radius: var(--radius-sm) if rounded

    3. Create `TableSkeleton.vue`:
       - Props: rows (number, default 5), columns (number, default 4)
       - Template: Renders skeleton rows matching table structure
       - Each row has skeleton cells with varying widths (20%, 40%, 30%, 10%)
       - Includes skeleton header row

    4. Update custom.scss to import components/_loading.scss
  </action>
  <verify>
    - app/src/components/ui/LoadingSkeleton.vue exists
    - app/src/components/ui/TableSkeleton.vue exists
    - app/src/assets/scss/components/_loading.scss exists with shimmer animation
    - Build succeeds: `npm run build --prefix app`
  </verify>
  <done>
    Loading skeleton components created with shimmer animation and reduced-motion support
  </done>
</task>

<task type="auto">
  <name>Task 2: Create empty state component</name>
  <files>app/src/components/ui/EmptyState.vue</files>
  <action>
    Create `EmptyState.vue` with props for customization (per CONTEXT: icon + neutral message + guidance):

    1. Props:
       - icon (string, default 'search') - Bootstrap Icon name without 'bi-' prefix
       - title (string, required) - e.g., "No genes match your search criteria"
       - message (string, optional) - guidance text, e.g., "Try adjusting your filters"
       - actionLabel (string, optional) - button text
       - actionVariant (string, default 'primary') - Bootstrap button variant

    2. Template structure:
       - Centered container with max-width: 400px
       - Bootstrap Icon at 4rem size, muted color
       - Title as h3
       - Message as p.text-muted
       - Optional BButton for action (emits 'action' event)

    3. Slots:
       - default slot for custom content below message
       - icon slot for custom icon content

    4. Styling:
       - padding: 3rem 1.5rem
       - text-align: center
       - Icon opacity: 0.5 for subtle appearance

    Example usage:
    <EmptyState
      icon="search"
      title="No genes match your search criteria"
      message="Try adjusting your filters or broadening your search terms."
      action-label="Clear All Filters"
      @action="clearFilters"
    />
  </action>
  <verify>
    - app/src/components/ui/EmptyState.vue exists
    - Component has icon, title, message, actionLabel props
    - Uses Bootstrap Icon (i.bi-{icon} class)
    - Build succeeds
  </verify>
  <done>
    Empty state component created with icon, neutral message, and optional action button
  </done>
</task>

<task type="auto">
  <name>Task 3: Register UI components globally</name>
  <files>app/src/global-components.js</files>
  <action>
    Add the new UI components to global registration:

    1. Import LoadingSkeleton, TableSkeleton, EmptyState
    2. Register them globally for use across the application
    3. These replace BSpinner usage in data-heavy views

    Note: Do NOT modify existing views in this plan. Integration into views will be a separate task to avoid scope creep.
  </action>
  <verify>
    - global-components.js imports and registers LoadingSkeleton, TableSkeleton, EmptyState
    - Build succeeds
  </verify>
  <done>
    UI components registered globally for application-wide use
  </done>
</task>

</tasks>

<verification>
```bash
# Build succeeds
npm run build --prefix app

# Check components exist
ls -la app/src/components/ui/

# Check shimmer animation in CSS
grep -r "shimmer\|skeleton" app/dist/assets/*.css | head -5

# Check global registration
grep -E "LoadingSkeleton|TableSkeleton|EmptyState" app/src/global-components.js
```
</verification>

<success_criteria>
- [ ] LoadingSkeleton.vue component created
- [ ] TableSkeleton.vue component created with configurable rows/columns
- [ ] EmptyState.vue component created with icon, title, message, action
- [ ] Shimmer animation defined in _loading.scss
- [ ] Animation respects prefers-reduced-motion
- [ ] Components registered globally
- [ ] Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/16-ui-ux-modernization/16-05-SUMMARY.md`
</output>
