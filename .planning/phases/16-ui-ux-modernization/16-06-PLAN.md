---
phase: 16-ui-ux-modernization
plan: 06
type: execute
wave: 3
depends_on: ["16-01", "16-04"]
files_modified:
  - app/src/components/small/TableSearchInput.vue
  - app/src/assets/scss/components/_search.scss
  - app/src/assets/scss/custom.scss
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Search input has clear button when text is entered"
    - "Search provides instant visual feedback on input"
    - "Clear button removes search text and triggers update"
    - "Search styling uses design tokens"
  artifacts:
    - path: "app/src/components/small/TableSearchInput.vue"
      provides: "Enhanced search input with clear button"
      contains: "clear"
    - path: "app/src/assets/scss/components/_search.scss"
      provides: "Search input styling"
      contains: ".search-input"
  key_links:
    - from: "app/src/components/small/TableSearchInput.vue"
      to: "_search.scss"
      via: "CSS classes"
      pattern: "search-input"
---

<objective>
Improve search and filter UX with clear buttons and instant feedback.

Purpose: Per CONTEXT.md and FR-07.8: "Enhance search/filter UX (instant feedback, clear buttons)". Tables like Genes, Entities use TableSearchInput. Adding a clear button and visual feedback improves the search experience.

Output: Enhanced TableSearchInput component with clear button and improved search styling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/16-ui-ux-modernization/16-CONTEXT.md
@.planning/phases/16-ui-ux-modernization/16-RESEARCH.md
@.planning/phases/16-ui-ux-modernization/16-01-SUMMARY.md
@.planning/phases/16-ui-ux-modernization/16-04-SUMMARY.md
@app/src/components/small/TableSearchInput.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance TableSearchInput with clear button</name>
  <files>app/src/components/small/TableSearchInput.vue</files>
  <action>
    Update TableSearchInput.vue to add clear button and improve UX:

    1. Template changes:
       - Wrap input in a container with position: relative
       - Add clear button (X icon) positioned absolutely on the right
       - Clear button only visible when input has value
       - Use Bootstrap Icon: <i class="bi bi-x-circle-fill"></i>

    2. Props additions:
       - clearable (boolean, default true) - show/hide clear button
       - loading (boolean, default false) - show loading indicator

    3. Events:
       - @clear - emitted when clear button clicked
       - Continue emitting @input for value changes

    4. Clear button behavior:
       - Click clears the input value
       - Emits both 'update:modelValue' with empty string and 'clear' event
       - Focus returns to input after clear

    5. Loading state:
       - Optional spinner icon when loading prop is true
       - Replaces clear button position during loading

    6. Accessibility:
       - Clear button has aria-label="Clear search"
       - type="button" to prevent form submission
  </action>
  <verify>
    - TableSearchInput.vue contains clear button element
    - Clear button has aria-label
    - Component emits 'clear' event
    - Build succeeds: `npm run build --prefix app`
  </verify>
  <done>
    TableSearchInput enhanced with clear button and improved UX
  </done>
</task>

<task type="auto">
  <name>Task 2: Create search input styling partial</name>
  <files>
    app/src/assets/scss/components/_search.scss
    app/src/assets/scss/custom.scss
  </files>
  <action>
    Create `components/_search.scss` with search input styling:

    1. Search container styling:
       - .search-input-container with position: relative
       - Ensure clear button positioning works

    2. Search input styling:
       - Uses form control focus states from 16-04
       - Padding-right to accommodate clear button
       - type="search" removes default browser clear button

    3. Clear button styling:
       - position: absolute, right: 0.5rem, top: 50%, transform: translateY(-50%)
       - Background: transparent
       - Border: none
       - Color: var(--bs-secondary)
       - Hover: color: var(--status-danger)
       - Cursor: pointer
       - transition: color var(--transition-fast)

    4. Loading indicator styling:
       - Same position as clear button
       - Spinner animation

    5. Instant feedback:
       - .search-input-active class for visual state when searching
       - Subtle border color change to indicate active search

    6. Update custom.scss to import components/_search.scss
  </action>
  <verify>
    - app/src/assets/scss/components/_search.scss exists
    - Contains .search-input-container and .search-clear-btn styles
    - Build succeeds
  </verify>
  <done>
    Search input styling created with clear button and instant feedback visual cues
  </done>
</task>

</tasks>

<verification>
```bash
# Build succeeds
npm run build --prefix app

# Check search styles in output
grep -r "search-input\|search-clear" app/dist/assets/*.css | head -5

# Check component has clear functionality
grep -E "clear|bi-x-circle" app/src/components/small/TableSearchInput.vue

# Start dev and test on Genes page
npm run dev --prefix app &
sleep 3
echo "Check http://localhost:5173/Genes - type in search, see clear button"
kill %1
```
</verification>

<success_criteria>
- [ ] TableSearchInput has clear button
- [ ] Clear button only visible when input has value
- [ ] Clear button has proper accessibility (aria-label)
- [ ] Search styling uses design tokens
- [ ] Visual feedback on active search
- [ ] Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/16-ui-ux-modernization/16-06-SUMMARY.md`
</output>
