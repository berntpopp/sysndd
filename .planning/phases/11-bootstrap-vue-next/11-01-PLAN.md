---
phase: 11-bootstrap-vue-next
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/main.js
  - app/src/App.vue
  - app/src/composables/useToastNotifications.js
  - app/src/composables/useModalControls.js
  - app/package.json
autonomous: true

must_haves:
  truths:
    - "App renders without Bootstrap-Vue errors"
    - "BApp component wraps entire application"
    - "Toast and modal composables available for use"
    - "Bootstrap 5 CSS loads correctly"
  artifacts:
    - path: "app/src/main.js"
      provides: "Bootstrap-Vue-Next plugin setup with BApp"
      contains: "bootstrap-vue-next"
    - path: "app/src/App.vue"
      provides: "BApp wrapper component"
      contains: "BApp"
    - path: "app/src/composables/useToastNotifications.js"
      provides: "Toast notification wrapper composable"
      exports: ["useToastNotifications"]
    - path: "app/src/composables/useModalControls.js"
      provides: "Modal control wrapper composable"
      exports: ["useModalControls"]
  key_links:
    - from: "app/src/main.js"
      to: "bootstrap-vue-next"
      via: "import and app.use()"
      pattern: "import.*bootstrap-vue-next"
    - from: "app/src/App.vue"
      to: "BApp"
      via: "template wrapper"
      pattern: "<BApp>"
---

<objective>
Set up Bootstrap-Vue-Next foundation with BApp wrapper and composables

Purpose: Establish the infrastructure required for migrating all Bootstrap-Vue components to Bootstrap-Vue-Next. This is the critical first step that enables all subsequent component migrations.

Output:
- Bootstrap-Vue-Next installed and configured
- BApp component wrapping the application
- useToastNotifications and useModalControls composables ready for use
- App renders with Bootstrap 5 styling
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-bootstrap-vue-next/11-CONTEXT.md
@.planning/phases/11-bootstrap-vue-next/11-RESEARCH.md
@app/src/main.js
@app/src/App.vue
@app/package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure Bootstrap-Vue-Next in main.js</name>
  <files>app/src/main.js, app/package.json</files>
  <action>
Update main.js to use Bootstrap-Vue-Next instead of Bootstrap-Vue:

1. Keep existing Bootstrap-Vue imports temporarily (needed until components are migrated)
2. Add Bootstrap-Vue-Next imports alongside:
   ```javascript
   import { createBootstrap } from 'bootstrap-vue-next'
   import 'bootstrap-vue-next/dist/bootstrap-vue-next.css'
   ```
3. After creating the app instance, add:
   ```javascript
   app.use(createBootstrap())
   ```
4. Update Bootstrap CSS import to Bootstrap 5 (already installed per Phase 10):
   - Change `import 'bootstrap/dist/css/bootstrap.css'` to use Bootstrap 5
   - Bootstrap 5.3.8 should already be in package.json from Phase 10-02
5. Keep Bootstrap-Vue CSS import for now (needed during transition)
6. Keep @vue/compat configureCompat() settings (still needed for other Vue 2 libs)

DO NOT remove Bootstrap-Vue imports yet - components still use them.
DO NOT change any component imports - that's for subsequent plans.
  </action>
  <verify>
Run `npm run serve` - app should start without errors. Both Bootstrap 4 and Bootstrap 5 CSS will be present temporarily.
  </verify>
  <done>
Bootstrap-Vue-Next plugin registered alongside Bootstrap-Vue. App renders without console errors related to Bootstrap.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create composables directory and toast/modal composables</name>
  <files>app/src/composables/useToastNotifications.js, app/src/composables/useModalControls.js</files>
  <action>
Create app/src/composables/ directory and add two composables:

1. Create app/src/composables/useToastNotifications.js:
   ```javascript
   import { useToast } from 'bootstrap-vue-next'

   export function useToastNotifications() {
     const { show } = useToast()

     /**
      * Show a toast notification
      * @param {string|object} message - Message to display (or object with message property)
      * @param {string} title - Toast title
      * @param {string} variant - Bootstrap variant (success, danger, warning, info)
      * @param {boolean} autoHide - Whether to auto-dismiss (default: true)
      * @param {number} autoHideDelay - Delay in ms before auto-hide (default: 3000)
      */
     const makeToast = (message, title = null, variant = null, autoHide = true, autoHideDelay = 3000) => {
       const body = typeof message === 'object' && message.message ? message.message : message

       show({
         props: {
           title,
           body,
           variant,
           pos: 'top-end',
           value: autoHide ? autoHideDelay : 0, // 0 means no auto-hide
         },
       })
     }

     return { makeToast }
   }
   ```

2. Create app/src/composables/useModalControls.js:
   ```javascript
   import { useModal } from 'bootstrap-vue-next'

   export function useModalControls() {
     const modal = useModal()

     /**
      * Show a modal by ID
      * @param {string} id - Modal ID to show
      */
     const showModal = (id) => {
       modal.show(id)
     }

     /**
      * Hide a modal by ID
      * @param {string} id - Modal ID to hide
      */
     const hideModal = (id) => {
       modal.hide(id)
     }

     /**
      * Create a confirmation modal
      * @param {object} options - Modal options
      * @returns {Promise} - Resolves with user's choice
      */
     const confirm = async (options) => {
       return modal.confirm(options)
     }

     return { showModal, hideModal, confirm }
   }
   ```

These composables wrap Bootstrap-Vue-Next's built-in composables to match the existing makeToast() API signature used throughout the codebase (from toastMixin.js).
  </action>
  <verify>
Files exist at app/src/composables/useToastNotifications.js and app/src/composables/useModalControls.js. No syntax errors when importing.
  </verify>
  <done>
Composables directory created with useToastNotifications and useModalControls. API matches existing toastMixin pattern for easier migration.
  </done>
</task>

<task type="auto">
  <name>Task 3: Wrap App.vue with BApp component</name>
  <files>app/src/App.vue</files>
  <action>
Update App.vue to use BApp wrapper component:

1. Import BApp in the script section:
   ```javascript
   import { BApp } from 'bootstrap-vue-next'
   ```

2. Register BApp in components:
   ```javascript
   components: {
     BApp,
   },
   ```

3. Wrap the entire template with BApp:
   ```vue
   <template>
     <BApp>
       <div id="app">
         <!-- existing content unchanged -->
       </div>
     </BApp>
   </template>
   ```

The BApp component provides:
- BToastOrchestrator for toast notifications
- BModalOrchestrator for modal dialogs
- Proper context for useToast() and useModal() composables

Keep all existing content inside the app div unchanged - perfect-scrollbar, router-view, footer, etc.
  </action>
  <verify>
Run `npm run serve` and verify:
1. App loads without errors
2. No "useToast must be used within a BApp" warnings
3. Existing layout renders correctly
  </verify>
  <done>
App.vue wrapped with BApp component. Toast and modal orchestrators are now available application-wide.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Run dev server: `cd app && npm run serve`
2. Open browser to localhost:8080
3. Verify:
   - App loads without console errors
   - Navigation works
   - Existing components still render (using Bootstrap-Vue via @vue/compat)
   - No visual regressions on home page

4. Check file structure:
   - app/src/composables/ directory exists
   - useToastNotifications.js exports useToastNotifications function
   - useModalControls.js exports useModalControls function
</verification>

<success_criteria>
- Bootstrap-Vue-Next installed and configured via createBootstrap()
- BApp component wraps application in App.vue
- Composables directory created with useToastNotifications and useModalControls
- App runs without errors (both Bootstrap-Vue and Bootstrap-Vue-Next coexist temporarily)
- Foundation ready for component migrations in subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/11-bootstrap-vue-next/11-01-SUMMARY.md`
</output>
