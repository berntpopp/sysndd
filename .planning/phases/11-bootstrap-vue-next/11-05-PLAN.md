---
phase: 11-bootstrap-vue-next
plan: 05
type: execute
wave: 3
depends_on: ["11-02", "11-03", "11-04"]
files_modified:
  - app/src/**/*.vue (70+ files)
  - app/src/assets/css/custom.css
  - app/src/assets/scss/custom.scss
autonomous: true

must_haves:
  truths:
    - "Spacing and margins render correctly (no visual breaks)"
    - "Text alignment works (start/end instead of left/right)"
    - "Float positioning works"
    - "Close buttons display correctly (.btn-close)"
    - "Screen reader text uses .visually-hidden"
  artifacts:
    - path: "app/src/**/*.vue"
      provides: "Updated Bootstrap 5 utility classes"
      contains: "ms-|me-|text-start|text-end"
  key_links:
    - from: "Vue templates"
      to: "Bootstrap 5 CSS"
      via: "utility classes"
      pattern: "class=.*ms-|me-|ps-|pe-"
---

<objective>
Update all Bootstrap 4 CSS utility classes to Bootstrap 5 equivalents

Purpose: Bootstrap 5 renamed utility classes for RTL (right-to-left) language support. ml-/mr- became ms-/me- (margin-start/margin-end), text-left/text-right became text-start/text-end. This plan does a comprehensive sweep of all 396 occurrences across 70+ files.

Output:
- All ml-*/mr-* replaced with ms-*/me-*
- All pl-*/pr-* replaced with ps-*/pe-*
- All text-left/text-right replaced with text-start/text-end
- All float-left/float-right replaced with float-start/float-end
- All .close replaced with .btn-close
- All .sr-only replaced with .visually-hidden
- All data-* attributes updated to data-bs-* (if using raw Bootstrap JS)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-bootstrap-vue-next/11-CONTEXT.md
@.planning/phases/11-bootstrap-vue-next/11-RESEARCH.md
@.planning/phases/11-bootstrap-vue-next/11-02-SUMMARY.md
@.planning/phases/11-bootstrap-vue-next/11-03-SUMMARY.md
@.planning/phases/11-bootstrap-vue-next/11-04-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace margin and padding directional classes</name>
  <files>app/src/**/*.vue</files>
  <action>
Do a systematic search and replace for margin and padding directional classes:

**Margin classes:**
- `ml-0` through `ml-5` and `ml-auto` -> `ms-0` through `ms-5` and `ms-auto`
- `mr-0` through `mr-5` and `mr-auto` -> `me-0` through `me-5` and `me-auto`

**Padding classes:**
- `pl-0` through `pl-5` -> `ps-0` through `ps-5`
- `pr-0` through `pr-5` -> `pe-0` through `pe-5`

**Include responsive variants:**
- `ml-sm-3`, `mr-md-2`, etc. -> `ms-sm-3`, `me-md-2`, etc.

**Sample verification approach (to catch issues early):**

1. First, identify 10 representative files spanning different view types:
   - 2 table views (e.g., TablesEntities.vue, TablesGenes.vue)
   - 2 form views (e.g., Login.vue, Curate.vue)
   - 2 detail views (e.g., EntityDetail.vue, GeneDetail.vue)
   - 2 layout components (e.g., Navbar.vue, Footer.vue)
   - 2 card/list views (e.g., Home.vue, Ontology.vue)

2. Apply replacements to these 10 files first:
   ```bash
   # For each sample file
   sed -i 's/\bml-/ms-/g; s/\bmr-/me-/g; s/\bpl-/ps-/g; s/\bpr-/pe-/g' <file>
   ```

3. Run the app and visually verify these 10 views have correct spacing.

4. If sample passes, proceed with remaining files:
   ```bash
   find app/src -name "*.vue" -exec sed -i 's/\bml-/ms-/g; s/\bmr-/me-/g; s/\bpl-/ps-/g; s/\bpr-/pe-/g' {} \;
   ```

Search commands to identify all occurrences:
```bash
# Margin left/right
grep -rE "class=.*\bm[lr]-[0-5auto]" app/src --include="*.vue" -l | sort -u

# Padding left/right
grep -rE "class=.*\bp[lr]-[0-5]" app/src --include="*.vue" -l | sort -u
```

Verify each replacement makes sense in context - some edge cases may need manual review.
  </action>
  <verify>
1. **Sample verification first:**
   - Check 10 representative views visually in browser
   - Verify spacing looks correct (buttons have proper margins, cards have padding, tables align)
   - If any visual issues, investigate before proceeding

2. **After full sweep, run counts:**
   ```bash
   # Before should show counts, after should be 0
   grep -rE "\bm[lr]-[0-5]|\bm[lr]-auto" app/src --include="*.vue" | wc -l
   grep -rE "\bp[lr]-[0-5]" app/src --include="*.vue" | wc -l
   ```
  </verify>
  <done>
All ml-*/mr-*/pl-*/pr-* classes replaced with ms-*/me-*/ps-*/pe-*. Sample views verified visually. Visual spacing intact across all views.
  </done>
</task>

<task type="auto">
  <name>Task 2: Replace text alignment and float classes</name>
  <files>app/src/**/*.vue</files>
  <action>
Replace text alignment and float positioning classes:

**Text alignment:**
- `text-left` -> `text-start`
- `text-right` -> `text-end`
- Include responsive: `text-sm-left` -> `text-sm-start`, etc.

**Float:**
- `float-left` -> `float-start`
- `float-right` -> `float-end`
- Include responsive: `float-md-left` -> `float-md-start`, etc.

Search commands:
```bash
# Text alignment
grep -rE "text-(left|right)" app/src --include="*.vue" -l

# Float
grep -rE "float-(left|right)" app/src --include="*.vue" -l
```

Apply replacements:
```bash
find . -name "*.vue" -exec sed -i 's/\btext-left\b/text-start/g; s/\btext-right\b/text-end/g' {} \;
find . -name "*.vue" -exec sed -i 's/\bfloat-left\b/float-start/g; s/\bfloat-right\b/float-end/g' {} \;
```
  </action>
  <verify>
```bash
# Should be 0
grep -rE "text-(left|right)|float-(left|right)" app/src --include="*.vue" | wc -l
```
Visual check: Tables, cards, and layouts should align correctly.
  </verify>
  <done>
All text-left/right and float-left/right replaced with start/end variants. Text and elements align correctly.
  </done>
</task>

<task type="auto">
  <name>Task 3: Replace close button, sr-only, and data attributes</name>
  <files>app/src/**/*.vue, app/src/assets/css/custom.css, app/src/assets/scss/custom.scss</files>
  <action>
Replace remaining Bootstrap 4-specific classes and attributes:

**Close button:**
- `.close` class -> `.btn-close` class
- Old pattern: `<button class="close">&times;</button>`
- New pattern: `<button class="btn-close" aria-label="Close"></button>`
- The &times; entity is no longer needed - btn-close uses CSS for the X

Search:
```bash
grep -r "class=\"close\"" app/src --include="*.vue"
grep -r "class='close'" app/src --include="*.vue"
```

**Screen reader only:**
- `.sr-only` -> `.visually-hidden`
- `.sr-only-focusable` -> `.visually-hidden-focusable`

Search:
```bash
grep -r "sr-only" app/src --include="*.vue"
grep -r "sr-only" app/src/assets --include="*.css" --include="*.scss"
```

**Data attributes (if using raw Bootstrap JS):**
- `data-toggle` -> `data-bs-toggle`
- `data-target` -> `data-bs-target`
- `data-dismiss` -> `data-bs-dismiss`
- `data-backdrop` -> `data-bs-backdrop`

Search:
```bash
grep -rE "data-(toggle|target|dismiss|backdrop)=" app/src --include="*.vue"
```

Note: Most Bootstrap functionality is handled by Bootstrap-Vue-Next components, so data-* attributes may be minimal.

**Also check custom CSS files:**
- app/src/assets/css/custom.css
- app/src/assets/scss/custom.scss

Replace any Bootstrap 4-specific selectors if custom styles override them.
  </action>
  <verify>
```bash
# All should be 0
grep -r "class=.*close[^d-]" app/src --include="*.vue" | grep -v "btn-close" | wc -l
grep -r "sr-only" app/src --include="*.vue" --include="*.css" --include="*.scss" | wc -l
grep -rE "data-(toggle|target|dismiss)=" app/src --include="*.vue" | wc -l
```
  </verify>
  <done>
Close buttons use .btn-close, screen reader text uses .visually-hidden, data attributes updated to data-bs-*. Accessibility preserved.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Visual verification:
   - Navigate through main views (Home, Entities, Genes, etc.)
   - Check spacing looks correct (no collapsed margins or missing padding)
   - Check text alignment in tables and cards
   - Check close buttons render as X icons
   - Check any screen reader text is visually hidden but accessible

2. Code verification:
   ```bash
   # All Bootstrap 4 directional classes should be gone
   grep -rE "\bm[lr]-[0-5]|\bm[lr]-auto" app/src --include="*.vue" | wc -l  # 0
   grep -rE "\bp[lr]-[0-5]" app/src --include="*.vue" | wc -l  # 0
   grep -rE "text-(left|right)" app/src --include="*.vue" | wc -l  # 0
   grep -rE "float-(left|right)" app/src --include="*.vue" | wc -l  # 0
   grep -r "sr-only" app/src --include="*.vue" | wc -l  # 0
   grep -r "class=\"close\"" app/src --include="*.vue" | wc -l  # 0
   ```

3. Responsive check (if possible):
   - Resize browser window
   - Verify responsive spacing classes work at different breakpoints

4. Console check:
   - No CSS-related console errors
</verification>

<success_criteria>
- All 396 Bootstrap 4 CSS class occurrences migrated to Bootstrap 5 equivalents
- ml-*/mr-* -> ms-*/me-* (margin start/end)
- pl-*/pr-* -> ps-*/pe-* (padding start/end)
- text-left/right -> text-start/end
- float-left/right -> float-start/end
- .close -> .btn-close
- .sr-only -> .visually-hidden
- data-* -> data-bs-* (where applicable)
- Visual layout unchanged
- No Bootstrap 4 utility classes remaining in codebase
</success_criteria>

<output>
After completion, create `.planning/phases/11-bootstrap-vue-next/11-05-SUMMARY.md`
</output>
