---
phase: 09-developer-experience
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/Dockerfile.dev
  - .env.example
autonomous: true

must_haves:
  truths:
    - "Developer can build development frontend with npm run serve"
    - "Developer knows all required environment variables from .env.example"
    - "Dockerfile.dev produces container that serves Vue.js dev server"
  artifacts:
    - path: "app/Dockerfile.dev"
      provides: "Development frontend container with hot module reload"
      min_lines: 20
      contains: "npm run serve"
    - path: ".env.example"
      provides: "Environment variable template for new developers"
      min_lines: 15
      contains: "MYSQL_DATABASE"
  key_links:
    - from: "app/Dockerfile.dev"
      to: "app/package.json"
      via: "npm ci and npm run serve"
      pattern: "npm ci|npm run serve"
---

<objective>
Create foundation files for development workflow: app/Dockerfile.dev for hot-reload frontend development and .env.example template for new developer onboarding.

Purpose: Enable instant frontend hot-reload during development and provide secure environment variable documentation for team onboarding.
Output: app/Dockerfile.dev (development container), .env.example (template with dummy values)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-developer-experience/09-RESEARCH.md

@app/Dockerfile
@app/package.json
@.env
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create app/Dockerfile.dev for hot-reload development</name>
  <files>app/Dockerfile.dev</files>
  <action>
Create app/Dockerfile.dev for Vue.js development with webpack-dev-server hot module reload.

Structure:
1. FROM node:20-alpine (match production Node version from app/Dockerfile)
2. WORKDIR /app
3. Copy package*.json and run npm ci --legacy-peer-deps (same flags as production)
4. Set environment variables:
   - NODE_ENV=development
   - HOST=0.0.0.0 (allow external connections for Traefik)
5. EXPOSE 8080 (match port from production Dockerfile)
6. HEALTHCHECK with wget (same as production but 60s start-period for slower dev builds)
7. CMD ["npm", "run", "serve", "--", "--host", "0.0.0.0"]

Key differences from production Dockerfile:
- NO source code COPY (provided via Compose Watch sync or volume mount)
- NO build step (serves development files directly)
- Uses npm run serve (not npm run build)
- Longer HEALTHCHECK start-period (60s) for development server startup

Include header comment explaining:
- Purpose: Development with hot module reload
- NOT for production (use app/Dockerfile for production)
- Source code mounted via docker-compose.override.yml
  </action>
  <verify>
Validate Dockerfile syntax:
```bash
docker build --check -f app/Dockerfile.dev app/
```
Check key elements present:
```bash
grep -E "FROM node:20|npm run serve|EXPOSE 8080|HEALTHCHECK" app/Dockerfile.dev
```
  </verify>
  <done>app/Dockerfile.dev exists with Node 20 Alpine base, npm run serve command, port 8080, and HEALTHCHECK instruction</done>
</task>

<task type="auto">
  <name>Task 2: Create .env.example template file</name>
  <files>.env.example</files>
  <action>
Create .env.example as a documented template showing all required environment variables with dummy values.

Content structure:
1. Header comment block explaining:
   - Purpose: Template for environment configuration
   - Setup instructions: cp .env.example .env && docker compose up
   - Warning: Never commit .env (contains secrets)

2. Database Configuration section:
   - MYSQL_DATABASE=sysndd_db
   - MYSQL_USER=your_username_here
   - MYSQL_PASSWORD=your_secure_password_here
   - MYSQL_ROOT_PASSWORD=your_secure_root_password_here

3. API Configuration section:
   - PASSWORD=your_api_password_here
   - SMTP_PASSWORD=your_smtp_password_here
   - API_CONFIG=sysndd_db (database config name)

4. Development Settings section:
   - ENVIRONMENT=development

5. Optional Settings section:
   - COMPOSE_PROJECT_NAME=sysndd

6. Footer with security notes:
   - Use strong passwords (16+ characters)
   - Rotate passwords in production
   - Check that .env is in .gitignore

Reference existing .env format for variable names but use dummy placeholder values like "your_xxx_here" (not actual secrets).
  </action>
  <verify>
Check file exists and contains key sections:
```bash
grep -E "MYSQL_DATABASE|MYSQL_PASSWORD|PASSWORD|SMTP_PASSWORD|ENVIRONMENT" .env.example
```
Verify .env is in .gitignore:
```bash
grep -E "^\.env$" .gitignore || echo ".env not in gitignore - add it"
```
  </verify>
  <done>.env.example exists with all required environment variables documented with dummy values, includes setup instructions and security warnings</done>
</task>

<task type="auto">
  <name>Task 3: Add .env to .gitignore if missing</name>
  <files>.gitignore</files>
  <action>
Check if .env is already in .gitignore. If not present, add it to prevent accidental commit of secrets.

Add these patterns if missing:
```
# Environment files with secrets
.env
.env.local
.env.*.local
```

Do NOT modify or remove existing .gitignore entries.
  </action>
  <verify>
Verify .env is now ignored:
```bash
git check-ignore .env && echo ".env is ignored"
```
  </verify>
  <done>.gitignore includes .env pattern, preventing accidental commit of secrets</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Dockerfile.dev builds successfully: `docker build -f app/Dockerfile.dev app/`
2. .env.example contains all variables from current .env (with dummy values)
3. .env is gitignored: `git check-ignore .env` returns 0
4. No secrets in .env.example: `grep -E "changeme|root|actual_password" .env.example` returns nothing
</verification>

<success_criteria>
1. app/Dockerfile.dev exists and passes docker build --check
2. .env.example exists with documented dummy values for all required variables
3. .env is in .gitignore
4. New developer can understand required configuration from .env.example alone
</success_criteria>

<output>
After completion, create `.planning/phases/09-developer-experience/09-01-SUMMARY.md`
</output>
