---
phase: 36-curation-table-modernization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/views/curate/ManageReReview.vue
autonomous: true

must_haves:
  truths:
    - "Curator can search ManageReReview table by any column"
    - "ManageReReview uses standardized pagination [10, 25, 50, 100]"
    - "Search filters batches by user name, batch ID, or counts"
  artifacts:
    - path: "app/src/views/curate/ManageReReview.vue"
      provides: "Search functionality for re-review table"
      contains: "filter"
  key_links:
    - from: "ManageReReview.vue"
      to: "BTable :filter"
      via: "v-model filter"
      pattern: ":filter=\"filter\""
---

<objective>
Add search functionality and standardize pagination for ManageReReview table.

Purpose: Enable curators to quickly find specific batches or users in the re-review management table (TBL-03, TBL-04).

Output: ManageReReview view with global search input and standardized [10, 25, 50, 100] pagination options.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/36-curation-table-modernization/36-RESEARCH.md

# Source file to modify
@app/src/views/curate/ManageReReview.vue

# Reference for search pattern
@app/src/views/curate/ApproveReview.vue (lines 44-58)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add search functionality to ManageReReview.vue</name>
  <files>app/src/views/curate/ManageReReview.vue</files>
  <action>
Add global search functionality to ManageReReview.vue following the pattern from ApproveReview.vue:

1. Add filter state variable in data():
```javascript
filter: null,
```

2. Add search row in template AFTER the "Assign new batch" section (after line 71), BEFORE the pagination row:
```vue
<!-- Search row -->
<BRow class="mb-2">
  <BCol>
    <BFormGroup class="mb-1">
      <BInputGroup prepend="Search" size="sm">
        <BFormInput
          id="filter-input"
          v-model="filter"
          type="search"
          placeholder="Search batches, users, or counts..."
          debounce="500"
        />
      </BInputGroup>
    </BFormGroup>
  </BCol>
</BRow>
```

3. Update BTable to include :filter prop:
```vue
<BTable
  :items="items_ReReviewTable"
  :fields="fields_ReReviewTable"
  :filter="filter"
  :per-page="perPage"
  :current-page="currentPage"
  ...
  @filtered="onFiltered"
>
```

4. Update onFiltered method to reset currentPage:
```javascript
onFiltered(filteredItems) {
  this.totalRows = filteredItems.length;
  this.currentPage = 1;
}
```

5. Update pageOptions from current format to standardized array:
```javascript
// Change from:
pageOptions: [
  { value: 5, text: '5' },
  { value: 10, text: '10' },
  { value: 20, text: '20' },
  { value: 50, text: '50' },
],

// To:
pageOptions: [10, 25, 50, 100],
```

6. Update perPage default from 50 to 25 (more reasonable default):
```javascript
perPage: 25,
```

7. Update the pagination controls row to match ApproveReview pattern:
```vue
<BRow class="my-2">
  <BCol class="my-1">
    <BInputGroup prepend="Per page" class="mb-1" size="sm">
      <BFormSelect
        id="per-page-select"
        v-model="perPage"
        :options="pageOptions"
        size="sm"
      />
    </BInputGroup>

    <BPagination
      v-model="currentPage"
      :total-rows="totalRows"
      :per-page="perPage"
      align="fill"
      size="sm"
      class="my-0"
      last-number
    />
  </BCol>
</BRow>
```
  </action>
  <verify>Run `npm run lint --prefix app` passes. Visual inspection shows search input appears above table.</verify>
  <done>ManageReReview.vue has global search functionality and standardized pagination [10, 25, 50, 100]</done>
</task>

</tasks>

<verification>
1. `npm run lint --prefix app` passes without errors
2. ManageReReview shows search input with "Search batches, users, or counts..." placeholder
3. Pagination options show [10, 25, 50, 100]
4. Typing in search filters table rows by user_name, re_review_batch, or count fields
5. Pagination updates correctly when search is applied (totalRows decreases)
6. Clearing search shows all rows again
</verification>

<success_criteria>
- ManageReReview has search functionality - TBL-04
- ManageReReview uses pageOptions [10, 25, 50, 100] - TBL-03
- Search debounces with 500ms delay
- onFiltered resets currentPage to 1
- No lint errors
</success_criteria>

<output>
After completion, create `.planning/phases/36-curation-table-modernization/36-02-SUMMARY.md`
</output>
