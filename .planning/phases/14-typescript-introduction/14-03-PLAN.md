---
phase: 14-typescript-introduction
plan: 03
type: execute
wave: 2
depends_on: ["14-01", "14-02"]
files_modified:
  - app/src/assets/js/constants/url_constants.ts
  - app/src/assets/js/constants/role_constants.ts
  - app/src/assets/js/constants/init_obj_constants.ts
  - app/src/assets/js/constants/main_nav_constants.ts
  - app/src/assets/js/constants/footer_nav_constants.ts
autonomous: true

must_haves:
  truths:
    - "All constant files converted to TypeScript"
    - "Constants use 'as const' assertions for literal types"
    - "Role constants use UserRole type from models"
    - "URL constants type-safe"
  artifacts:
    - path: "app/src/assets/js/constants/url_constants.ts"
      provides: "URL configuration"
      contains: "as const"
    - path: "app/src/assets/js/constants/role_constants.ts"
      provides: "User role definitions"
      contains: "UserRole"
  key_links:
    - from: "app/src/assets/js/constants/role_constants.ts"
      to: "app/src/types/models.ts"
      via: "type import"
      pattern: "import type.*UserRole"
---

<objective>
Convert all constant files from JavaScript to TypeScript with proper typing

Purpose: Add type safety to application constants, enabling compile-time verification of configuration values and preventing typos in role names, URLs, and navigation items.

Output: 5 constant files converted to TypeScript with const assertions and proper type imports
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14-typescript-introduction/14-CONTEXT.md
@.planning/phases/14-typescript-introduction/14-RESEARCH.md
@app/src/assets/js/constants/url_constants.js
@app/src/assets/js/constants/role_constants.js
@app/src/assets/js/constants/init_obj_constants.js
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert URL and role constants</name>
  <files>app/src/assets/js/constants/url_constants.ts, app/src/assets/js/constants/role_constants.ts</files>
  <action>
Convert url_constants.js to url_constants.ts:

```bash
cd app && git mv src/assets/js/constants/url_constants.js src/assets/js/constants/url_constants.ts
```

Update content with TypeScript and const assertion:

```typescript
// url_constants.ts
/**
 * URL constants used throughout the application.
 * Values sourced from environment variables with type safety.
 */

/**
 * Application URL configuration
 * Using 'as const' enables literal type inference
 */
const URLS = {
  /** Creative Commons Attribution 4.0 International License */
  COMMON_LICENSE: 'http://creativecommons.org/licenses/by/4.0/',

  /** GitHub repository URL */
  GITHUB: 'https://github.com/berntpopp/sysndd/',

  /** German Research Foundation (DFG) URL */
  DFG: 'https://www.dfg.de/',

  /** University of Bern URL */
  UNIBE: 'https://www.unibe.ch/',

  /** European Reference Network for Rare Congenital Malformations */
  ERN_ITHACA: 'https://ern-ithaca.eu/',

  /** Relative link to the API documentation endpoint */
  API_LINK: '/API',

  /** Base URL for API calls (from environment) */
  API_URL: import.meta.env.VITE_API_URL,
} as const;

export default URLS;

/** Type for the URLS object - enables strict typing in consumers */
export type UrlConfig = typeof URLS;
```

Convert role_constants.js to role_constants.ts:

```bash
cd app && git mv src/assets/js/constants/role_constants.js src/assets/js/constants/role_constants.ts
```

Update with TypeScript types from models.ts:

```typescript
// role_constants.ts
/**
 * Constants related to user roles and their permissions within the application.
 */

import type { UserRole, NavigationSection } from '@/types';

/**
 * Role configuration with navigation permissions
 */
const ROLES = {
  /**
   * All allowed roles in the application (ordered by privilege)
   */
  ALLOWED_ROLES: ['Administrator', 'Curator', 'Reviewer', 'Viewer'] as const satisfies readonly UserRole[],

  /**
   * Navigation permissions for each role
   * Index corresponds to ALLOWED_ROLES order
   */
  ALLOWENCE_NAVIGATION: [
    ['Admin', 'Curate', 'Review', 'View'],
    ['Curate', 'Review', 'View'],
    ['Review', 'View'],
    ['View'],
  ] as const satisfies readonly (readonly NavigationSection[])[],
} as const;

export default ROLES;

/** Type for accessing role navigation */
export type RoleConfig = typeof ROLES;
```

Note: `satisfies` is TypeScript 4.9+ - ensures the const assertion matches our defined types while keeping the literal types.
  </action>
  <verify>
```bash
ls app/src/assets/js/constants/*.ts 2>/dev/null | head -2
grep -l "as const" app/src/assets/js/constants/*.ts | wc -l
```
Should show url_constants.ts, role_constants.ts, and count of 2+ files with "as const".
  </verify>
  <done>url_constants.ts and role_constants.ts converted with const assertions and type imports</done>
</task>

<task type="auto">
  <name>Task 2: Convert init_obj_constants</name>
  <files>app/src/assets/js/constants/init_obj_constants.ts</files>
  <action>
Convert init_obj_constants.js to init_obj_constants.ts:

```bash
cd app && git mv src/assets/js/constants/init_obj_constants.js src/assets/js/constants/init_obj_constants.ts
```

Update with TypeScript types using models from types/:

```typescript
// init_obj_constants.ts
/**
 * Constants for initializing various objects used in the application.
 * Provides type-safe initial state for statistics and news displays.
 */

import type { StatisticsMeta, CategoryStat, NewsItem, StatisticsResponse } from '@/types';

/**
 * Statistics initialization structure
 */
interface StatisticsInit {
  meta: StatisticsMeta[];
  data: CategoryStat[];
}

/**
 * Initial objects for application state
 */
const INIT_OBJECTS = {
  /**
   * Initial structure for entity statistics.
   * Used to pre-populate UI before API data loads.
   */
  ENTITY_STAT_INIT: {
    meta: [
      {
        last_update: '2010-12-01 00:00:00',
        executionTime: null,
      },
    ],
    data: [
      {
        category: 'Definitive',
        n: 398,
        inheritance: 'All',
        groups: [
          { category: 'Definitive', category_id: 1, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'X-linked', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'Other', n: 0 },
        ],
      },
      {
        category: 'Moderate',
        n: 16,
        inheritance: 'All',
        groups: [
          { category: 'Moderate', category_id: 2, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Moderate', category_id: 2, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Moderate', category_id: 2, inheritance: 'X-linked', n: 0 },
        ],
      },
      {
        category: 'Limited',
        n: 33,
        inheritance: 'All',
        groups: [
          { category: 'Limited', category_id: 3, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'X-linked', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'Other', n: 0 },
        ],
      },
    ],
  } satisfies StatisticsInit,

  /**
   * Initial structure for gene statistics.
   * Similar structure to ENTITY_STAT_INIT.
   */
  GENE_STAT_INIT: {
    meta: [
      {
        last_update: '2010-12-01 00:00:00',
        executionTime: null,
      },
    ],
    data: [
      {
        category: 'Definitive',
        n: 344,
        inheritance: 'All',
        groups: [
          { category: 'Definitive', category_id: 1, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'X-linked', n: 0 },
          { category: 'Definitive', category_id: 1, inheritance: 'Other', n: 0 },
        ],
      },
      {
        category: 'Moderate',
        n: 23,
        inheritance: 'All',
        groups: [
          { category: 'Moderate', category_id: 2, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Moderate', category_id: 2, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Moderate', category_id: 2, inheritance: 'X-linked', n: 0 },
        ],
      },
      {
        category: 'Limited',
        n: 35,
        inheritance: 'All',
        groups: [
          { category: 'Limited', category_id: 3, inheritance: 'Autosomal recessive', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'Autosomal dominant', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'X-linked', n: 0 },
          { category: 'Limited', category_id: 3, inheritance: 'Other', n: 0 },
        ],
      },
    ],
  } satisfies StatisticsInit,

  /**
   * Initial list of news items.
   * Pre-populated sample data for UI before API response.
   */
  NEWS_INIT: [
    {
      entity_id: 771,
      hgnc_id: 'HGNC:2183',
      symbol: 'VPS13B',
      disease_ontology_id_version: 'OMIM:216550',
      disease_ontology_name: 'Cohen syndrome',
      hpo_mode_of_inheritance_term: 'HP:0000007',
      hpo_mode_of_inheritance_term_name: 'Autosomal recessive inheritance',
      inheritance_filter: 'Autosomal recessive',
      ndd_phenotype: 1,
      ndd_phenotype_word: 'Yes',
      entry_date: '2010-11-23 00:00:00',
      category: 'Definitive',
      category_id: 1,
    },
    // ... (keep all 5 items from original)
  ] as NewsItem[],
} as const;

export default INIT_OBJECTS;

export type InitObjectsConfig = typeof INIT_OBJECTS;
```

Note: Keep all 5 NEWS_INIT items from the original file - only showing first for brevity. The `satisfies` operator validates types while preserving literal inference.
  </action>
  <verify>
```bash
test -f app/src/assets/js/constants/init_obj_constants.ts && echo "File exists" && grep -q "satisfies" app/src/assets/js/constants/init_obj_constants.ts && echo "Uses satisfies"
```
  </verify>
  <done>init_obj_constants.ts converted with type imports from @/types</done>
</task>

<task type="auto">
  <name>Task 3: Convert navigation constants</name>
  <files>app/src/assets/js/constants/main_nav_constants.ts, app/src/assets/js/constants/footer_nav_constants.ts</files>
  <action>
First, read the current content of both navigation constant files to understand their structure:

```bash
cat app/src/assets/js/constants/main_nav_constants.js
cat app/src/assets/js/constants/footer_nav_constants.js
```

Convert main_nav_constants.js to main_nav_constants.ts:

```bash
cd app && git mv src/assets/js/constants/main_nav_constants.js src/assets/js/constants/main_nav_constants.ts
```

Add TypeScript types based on content. Example structure (adjust based on actual file content):

```typescript
// main_nav_constants.ts
/**
 * Main navigation menu configuration
 */

/** Navigation item structure */
export interface NavItem {
  name: string;
  path: string;
  icon?: string;
  children?: NavItem[];
  requiresAuth?: boolean;
  allowedRoles?: string[];
}

const MAIN_NAV = {
  // ... existing content with type annotations
} as const;

export default MAIN_NAV;
```

Convert footer_nav_constants.js to footer_nav_constants.ts:

```bash
cd app && git mv src/assets/js/constants/footer_nav_constants.js src/assets/js/constants/footer_nav_constants.ts
```

Add TypeScript types based on content:

```typescript
// footer_nav_constants.ts
/**
 * Footer navigation and links configuration
 */

/** Footer link structure */
export interface FooterLink {
  text: string;
  url: string;
  external?: boolean;
}

const FOOTER_NAV = {
  // ... existing content with type annotations
} as const;

export default FOOTER_NAV;
```

After converting both:
- Ensure all .js files in constants/ are renamed to .ts
- Verify no .js files remain
- Run type check to catch any issues
  </action>
  <verify>
```bash
ls app/src/assets/js/constants/
echo "--- JS files remaining: ---"
ls app/src/assets/js/constants/*.js 2>/dev/null || echo "None (good!)"
```
Should show only .ts files and "None" for .js files.
  </verify>
  <done>All 5 constant files converted to TypeScript; no .js files remain in constants/</done>
</task>

</tasks>

<verification>
1. All constant files are TypeScript:
   ```bash
   ls app/src/assets/js/constants/
   ```
   Should show: url_constants.ts, role_constants.ts, init_obj_constants.ts, main_nav_constants.ts, footer_nav_constants.ts

2. No JavaScript files remain:
   ```bash
   ls app/src/assets/js/constants/*.js 2>/dev/null || echo "Clean"
   ```
   Should show "Clean"

3. Constants compile:
   ```bash
   cd app && npx tsc --noEmit src/assets/js/constants/*.ts
   ```
   Should complete without errors

4. Type imports work:
   ```bash
   grep "from '@/types'" app/src/assets/js/constants/*.ts
   ```
   Should show imports in role_constants.ts and init_obj_constants.ts
</verification>

<success_criteria>
- 5 constant files converted from .js to .ts
- url_constants.ts uses "as const" assertion
- role_constants.ts imports UserRole type
- init_obj_constants.ts imports types from @/types
- main_nav_constants.ts has NavItem interface
- footer_nav_constants.ts has FooterLink interface
- No .js files remain in constants directory
- All files compile without type errors
</success_criteria>

<output>
After completion, create `.planning/phases/14-typescript-introduction/14-03-SUMMARY.md`
</output>
