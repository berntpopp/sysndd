---
phase: 14-typescript-introduction
plan: 06
type: execute
wave: 3
depends_on: ["14-03", "14-04", "14-05"]
files_modified:
  - app/package.json
  - app/eslint.config.js
  - app/.prettierrc
  - app/.prettierignore
autonomous: true

must_haves:
  truths:
    - "ESLint 9 flat config installed and working"
    - "TypeScript-eslint rules active"
    - "Prettier 3 installed and configured"
    - "Lint runs without blocking errors"
  artifacts:
    - path: "app/eslint.config.js"
      provides: "ESLint 9 flat config"
      contains: "typescript-eslint"
    - path: "app/.prettierrc"
      provides: "Prettier configuration"
      contains: "singleQuote"
  key_links:
    - from: "app/eslint.config.js"
      to: "typescript-eslint"
      via: "plugin import"
      pattern: "tseslint"
---

<objective>
Install and configure ESLint 9 flat config with TypeScript support and Prettier

Purpose: Modernize linting infrastructure to support TypeScript, using ESLint 9 flat config format and Prettier for consistent code formatting. Rules set to 'warn' during migration to avoid blocking development.

Output: ESLint 9 with TypeScript rules, Prettier 3 configured, lint scripts in package.json
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/14-typescript-introduction/14-CONTEXT.md
@.planning/phases/14-typescript-introduction/14-RESEARCH.md
@app/package.json
@app/.eslintrc.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install ESLint 9 and TypeScript support</name>
  <files>app/package.json</files>
  <action>
Remove old ESLint packages and install ESLint 9 with TypeScript support:

```bash
cd app && npm uninstall eslint babel-eslint eslint-plugin-vue eslint-plugin-import @vue/eslint-config-airbnb @vue/cli-plugin-eslint
```

Install new ESLint 9 stack:

```bash
cd app && npm install --save-dev eslint@^9.0.0 typescript-eslint eslint-plugin-vue @eslint/js globals
```

Install Prettier and ESLint-Prettier integration:

```bash
cd app && npm install --save-dev prettier@^3.0.0 eslint-config-prettier
```

Update package.json scripts:
- Replace "lint": "vue-cli-service lint" with "lint": "eslint . --ext .vue,.js,.ts,.tsx"
- Add "lint:fix": "eslint . --ext .vue,.js,.ts,.tsx --fix"
- Add "format": "prettier --write \"src/**/*.{js,ts,vue,json,css,scss}\""
- Add "format:check": "prettier --check \"src/**/*.{js,ts,vue,json,css,scss}\""

Note: The --ext flag is deprecated in ESLint 9 but still works. Config handles file matching.
  </action>
  <verify>
```bash
cd app && npm list eslint typescript-eslint prettier
```
Should show eslint@9.x.x, typescript-eslint, prettier@3.x.x
  </verify>
  <done>ESLint 9, typescript-eslint, and Prettier 3 installed; scripts updated</done>
</task>

<task type="auto">
  <name>Task 2: Create ESLint 9 flat config</name>
  <files>app/eslint.config.js</files>
  <action>
Remove old .eslintrc.json:

```bash
cd app && rm -f .eslintrc.json .eslintrc.js .eslintrc
```

Create eslint.config.js (ESLint 9 flat config format):

```javascript
// eslint.config.js
// ESLint 9 flat config for Vue 3 + TypeScript
// See: https://eslint.org/docs/latest/use/configure/configuration-files-new

import js from '@eslint/js';
import tseslint from 'typescript-eslint';
import pluginVue from 'eslint-plugin-vue';
import prettierConfig from 'eslint-config-prettier';
import globals from 'globals';

export default [
  // Global ignores
  {
    ignores: [
      'dist/**',
      'node_modules/**',
      '*.config.js',
      '*.config.ts',
      'public/**',
    ],
  },

  // Base JavaScript recommendations
  js.configs.recommended,

  // TypeScript recommendations
  ...tseslint.configs.recommended,

  // Vue 3 recommendations
  ...pluginVue.configs['flat/recommended'],

  // Prettier integration (disables conflicting rules)
  prettierConfig,

  // Project-specific configuration
  {
    files: ['**/*.{js,ts,vue}'],
    languageOptions: {
      ecmaVersion: 'latest',
      sourceType: 'module',
      globals: {
        ...globals.browser,
        ...globals.node,
      },
      parserOptions: {
        parser: tseslint.parser,
        extraFileExtensions: ['.vue'],
      },
    },
    rules: {
      // Migration strategy: 'warn' not 'error' to avoid blocking
      '@typescript-eslint/no-explicit-any': 'warn',
      '@typescript-eslint/no-unused-vars': ['warn', { argsIgnorePattern: '^_' }],
      '@typescript-eslint/no-require-imports': 'off', // Allow require() during migration

      // Vue rules - relaxed for migration
      'vue/multi-word-component-names': 'warn',
      'vue/no-v-html': 'warn',
      'vue/require-default-prop': 'warn',
      'vue/require-prop-types': 'warn',

      // Preserve existing relaxed rules from old config
      'no-console': 'off',
      'no-debugger': process.env.NODE_ENV === 'production' ? 'error' : 'warn',
      'no-unused-vars': 'off', // TypeScript handles this
      'no-undef': 'off', // TypeScript handles this
    },
  },

  // Vue file specific configuration
  {
    files: ['**/*.vue'],
    languageOptions: {
      parserOptions: {
        parser: tseslint.parser,
      },
    },
  },
];
```

Key features:
- Uses ESLint 9 flat config format (array export)
- TypeScript-eslint for type-aware linting
- Vue plugin with flat/recommended
- Prettier config to disable formatting rules
- All rules set to 'warn' during migration
- Preserves relaxed rules from old config (no-console off, etc.)
  </action>
  <verify>
```bash
test -f app/eslint.config.js && echo "Config exists"
cd app && npx eslint --version
```
Should show v9.x.x version.
  </verify>
  <done>eslint.config.js created with ESLint 9 flat config format</done>
</task>

<task type="auto">
  <name>Task 3: Configure Prettier and verify linting</name>
  <files>app/.prettierrc, app/.prettierignore</files>
  <action>
Create .prettierrc with Vue/TypeScript best practices (from RESEARCH.md):

```json
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5",
  "printWidth": 100,
  "vueIndentScriptAndStyle": false,
  "endOfLine": "lf"
}
```

Create .prettierignore to skip generated files:

```
dist/
node_modules/
*.min.js
*.min.css
public/
coverage/
```

Verify ESLint runs without fatal errors:

```bash
cd app && npx eslint src/main.ts src/stores/ui.ts --max-warnings=100
```

Expected: Warnings are OK (migration mode), but no fatal errors.

Verify Prettier runs:

```bash
cd app && npx prettier --check "src/types/*.ts"
```

Expected: Files may need formatting, but command should run.

Run a quick lint to verify setup:

```bash
cd app && npm run lint 2>&1 | tail -20
```
  </action>
  <verify>
```bash
test -f app/.prettierrc && echo "Prettier config exists"
cd app && npm run lint 2>&1 | grep -E "(error|warning)" | head -10
```
Should show warnings (OK) but no fatal errors.
  </verify>
  <done>Prettier configured; ESLint and Prettier run successfully with warnings (migration mode)</done>
</task>

</tasks>

<verification>
1. ESLint 9 installed and configured:
   ```bash
   cd app && npx eslint --version
   ls app/eslint.config.js
   ```

2. Old ESLint config removed:
   ```bash
   ls app/.eslintrc* 2>/dev/null || echo "Clean"
   ```

3. Prettier configured:
   ```bash
   cat app/.prettierrc
   ```

4. Lint command works:
   ```bash
   cd app && npm run lint
   ```
   Should run with warnings but no fatal errors

5. Format command works:
   ```bash
   cd app && npm run format:check
   ```
</verification>

<success_criteria>
- ESLint 9.x installed
- typescript-eslint installed
- Prettier 3.x installed
- eslint.config.js created with flat config format
- .prettierrc created
- .prettierignore created
- Old .eslintrc.json removed
- npm run lint executes without fatal errors
- npm run format:check executes
- Rules set to 'warn' for migration period
</success_criteria>

<output>
After completion, create `.planning/phases/14-typescript-introduction/14-06-SUMMARY.md`
</output>
