# Milestone v10.0: Data Quality & AI Insights

**Status:** SHIPPED 2026-02-01
**Phases:** 55-65 (12 active phases including decimal phases)
**Total Plans:** 25

## Overview

SysNDD v10.0 stabilizes data quality with 8 major bug fixes, enhances literature research tools (Publications, Pubtator), and adds AI-generated cluster summaries using Gemini API. Bugs are fixed first (user priority), followed by view improvements and LLM integration. The milestone concludes with admin updates and GitHub Pages modernization.

## Phases

### Phase 55: Bug Fixes

**Goal:** All 8 major entity and curation bugs resolved, restoring expected behavior
**Depends on:** None (foundation phase)
**Plans:** 2 plans

Plans:
- [x] 55-01-PLAN.md - Entity update bugs (EIF2AK2, GAP43, MEF2C)
- [x] 55-02-PLAN.md - Curation workflow bugs (viewer profile, PMID deletion, entities over time, disease renaming, re-reviewer identity)

**Requirements:**
- BUG-01: EIF2AK2 entity publication update (#122)
- BUG-02: GAP43 entity visibility (#115)
- BUG-03: MEF2C entity updates (#114)
- BUG-04: Viewer profile access
- BUG-05: PMID preservation during re-review
- BUG-06: Entities over time counts (#44)
- BUG-07: Disease rename approval (#41) - WONTFIX
- BUG-08: Re-reviewer identity preservation

---

### Phase 56: Variant Correlations & Publications

**Goal:** Navigation links work correctly; publications view has improved usability
**Depends on:** Phase 55
**Plans:** 2 plans

Plans:
- [x] 56-01-PLAN.md - Variant navigation fixes
- [x] 56-02-PLAN.md - Publications improvements (table UX, API metadata, TimePlot, Stats)

**Requirements:**
- VCOR-01: VariantCorrelations view navigation
- VCOR-02: VariantCounts view navigation
- PUB-01: Publications table UX
- PUB-02: Publication metadata from PubMed
- PUB-03: TimePlot improvements
- PUB-04: Stats view

---

### Phase 56.1: Admin Publication Bulk Management (INSERTED)

**Goal:** Administrators can refresh publication metadata from PubMed in bulk via ManageAnnotations
**Depends on:** Phase 56
**Plans:** 2 plans

Plans:
- [x] 56.1-01-PLAN.md - API endpoints for publication refresh
- [x] 56.1-02-PLAN.md - ManageAnnotations UI with progress tracking

**Requirements:**
- PUB-ADMIN-01: Admin API endpoint for publication refresh
- PUB-ADMIN-02: ManageAnnotations UI
- PUB-ADMIN-03: Progress feedback

---

### Phase 57: Pubtator Improvements

**Goal:** Curators can prioritize genes for review; users can explore gene-literature connections
**Depends on:** Phase 56
**Plans:** 2 plans

Plans:
- [x] 57-01-PLAN.md - Stats page fix, API enhancement, admin panel section
- [x] 57-02-PLAN.md - Gene list UI with novel badges, filtering, PMID chips, Excel export

**Requirements:**
- PUBT-01: Stats page fix
- PUBT-02: Gene prioritization list
- PUBT-03: Novel gene alerts
- PUBT-04: Gene-literature exploration
- PUBT-05: Excel export
- PUBT-06: Documentation

---

### Phase 57.1: PubTator Async Repository Refactor (INSERTED)

**Goal:** Async PubTator database operations use parameterized queries via repository pattern
**Depends on:** Phase 57
**Plans:** 1 plan

Plans:
- [x] 57.1-01-PLAN.md - Refactor pubtator_db_update_async with parameterized queries

**Requirements:**
- PUBT-ASYNC-01: Parameterized queries
- PUBT-ASYNC-02: Direct connection to db_execute_* helpers
- PUBT-ASYNC-03: Gene symbol computation parameterized

---

### Phase 58: LLM Foundation

**Goal:** Gemini API integrated with structured output and entity validation
**Depends on:** Phase 55
**Plans:** 2 plans

Plans:
- [x] 58-01-PLAN.md - Gemini API client with ellmer
- [x] 58-02-PLAN.md - Entity validation pipeline

**Requirements:**
- LLM-01: Gemini API client with ellmer
- LLM-02: API key in environment variable
- LLM-03: Structured JSON output
- LLM-04: Entity validation against database

---

### Phase 59: LLM Batch, Caching & Validation

**Goal:** Summaries generated as part of clustering pipeline, validated by LLM-as-judge, cached with long TTL
**Depends on:** Phase 58
**Plans:** 2 plans

Plans:
- [x] 59-01-PLAN.md - Batch generation chained after clustering
- [x] 59-02-PLAN.md - LLM-as-judge validation and caching

**Requirements:**
- LLM-05: Batch generation chained after clustering
- LLM-06: Hash-based cache invalidation
- LLM-09: LLM-as-judge validation (merged from Phase 61)
- LLM-10: Confidence scoring with metadata (merged from Phase 61)

---

### Phase 60: LLM Display

**Goal:** Cluster summaries visible on analysis pages with clear AI provenance
**Depends on:** Phase 59
**Plans:** 1 plan

Plans:
- [x] 60-01-PLAN.md - Cluster summary display components

**Requirements:**
- LLM-07: Phenotype cluster summaries displayed
- LLM-08: Functional cluster summaries displayed
- LLM-12: AI-generated badge with confidence indicator

---

### Phase 62: Admin & Infrastructure

**Goal:** Admin comparisons updated; GitHub Pages deploys via Actions workflow
**Depends on:** Phase 55 (parallel to LLM phases)
**Plans:** 2 plans

Plans:
- [x] 62-01-PLAN.md - Async comparisons refresh job with admin UI
- [x] 62-02-PLAN.md - Quarto documentation with GitHub Pages deployment

**Requirements:**
- ADMIN-01: Admin comparisons functionality
- INFRA-01: GitHub Pages via GitHub Actions

---

### Phase 63: LLM Pipeline Overhaul

**Goal:** Fix cascading failures in LLM batch generation pipeline
**Depends on:** Phase 60
**Plans:** 3 plans

Plans:
- [x] 63-01-PLAN.md - Docker ICU fix, database operations debug, JSON serialization
- [x] 63-02-PLAN.md - LLM pipeline verification, test suite, linting
- [x] 63-03-PLAN.md - End-to-end browser verification with Playwright MCP

**Requirements:**
- LLM-FIX-01: Docker ICU compatibility
- LLM-FIX-02: Database operations in mirai daemons
- LLM-FIX-03: JSON serialization for SQL binding
- LLM-FIX-04: Mirai daemon database connections
- LLM-FIX-05: LLM batch generation pipeline
- LLM-FIX-06: Summaries stored in cache table
- LLM-FIX-07: Frontend displays AI-generated summaries

---

### Phase 64: LLM Admin Dashboard

**Goal:** Admin dashboard to manage LLM settings, edit prompts, manage cache, and monitor activity
**Depends on:** Phase 63
**Plans:** 4 plans

Plans:
- [x] 64-01-PLAN.md - Backend API endpoints for LLM config, cache, logs, regeneration
- [x] 64-02-PLAN.md - Database migration for prompt templates
- [x] 64-03-PLAN.md - Frontend foundation (types, composable, routing)
- [x] 64-04-PLAN.md - UI components (ManageLLM.vue, sub-components, navigation)

**Requirements:**
- LLM-ADMIN-01 to LLM-ADMIN-10: Full admin dashboard functionality

---

### Phase 65: Comparisons Accessibility

**Goal:** Fix all lint, format, and test issues across codebase
**Depends on:** Phase 64
**Plans:** 2 plans

Plans:
- [x] 65-01-PLAN.md - Comparisons table UX and accessible icons
- [x] 65-02-PLAN.md - Codebase-wide lint, format, and test fixes

---

## Milestone Summary

**Decimal Phases:**
- Phase 56.1: Admin Publication Bulk Management (inserted after Phase 56 for admin tooling)
- Phase 57.1: PubTator Async Repository Refactor (inserted after Phase 57 for SQL injection prevention)

**Key Decisions:**

| Decision | Rationale | Outcome |
|----------|-----------|---------|
| Use ellmer >= 0.4.0 for Gemini API | Not gemini.R - more features, better maintained | ✓ Works |
| Entity validation mandatory | LLMs invent plausible gene names | ✓ Prevents hallucinations |
| LLM-as-judge in pipeline | 64-68% agreement - use with rule-based validators | ✓ Confidence scoring |
| Batch pre-generation via mirai | No real-time generation - API latency too high | ✓ Fast display |
| Hash-based cache invalidation | Cluster composition changes invalidate old summaries | ✓ Correct behavior |
| set.seed(42) for clustering | Ensure hash consistency between batch and API | ⚠️ Fragile coupling |
| noble P3M URL for Docker | rocker/r-ver:4.4.3 uses Ubuntu 24.04 with ICU 74 | ✓ Docker builds |
| DBI NULL to NA conversion | DBI::dbBind requires length 1 | ✓ Parameter binding works |

**Issues Resolved:**
- 8 major bugs (EIF2AK2, GAP43, MEF2C, viewer profile, PMID deletion, entities over time, disease renaming, re-reviewer identity)
- Variant navigation links to /Entities/ with vario_id filter
- Publications table caching and row details
- Pubtator Stats page and gene prioritization
- LLM pipeline cascading failures (Docker ICU, DBI binding, hash consistency)
- PubTator admin API serialization

**Issues Deferred:**
- LLM-ADMIN-11: Admin panel for summary review (dropped - fully automated)

**Technical Debt Incurred:**
- Clustering determinism via set.seed(42) - fragile if algorithm changes
- PUB-02 partially satisfied - metadata via backend proxy, not direct PubMed API

---

_For current project status, see .planning/ROADMAP.md_
_Archived: 2026-02-01 as part of v10.0 milestone completion_
