# Requirements: SysNDD v9.0 Production Readiness

**Defined:** 2026-01-29
**Shipped:** 2026-01-31
**Core Value:** A new developer can clone the repo and be productive within minutes, with confidence that their changes won't break existing functionality.

## v9.0 Requirements

Requirements for production readiness milestone. Each maps to roadmap phases.

### Migration System

- [x] **MIGR-01**: System creates schema_version table to track applied migrations
- [x] **MIGR-02**: Migrations execute sequentially in numeric order (001, 002, 003...)
- [x] **MIGR-03**: Migration runner is idempotent (safe to run multiple times)
- [x] **MIGR-04**: API startup auto-detects and applies missing migrations
- [x] **MIGR-05**: Migration 002 rewritten to be idempotent (IF NOT EXISTS guards)
- [x] **MIGR-06**: Health endpoint reports pending migrations count

### Backup Management

- [x] **BKUP-01**: API endpoint lists available backup files with metadata
- [x] **BKUP-02**: Admin UI displays backup list with download links
- [x] **BKUP-03**: API endpoint triggers manual backup creation
- [x] **BKUP-04**: Restore requires typed confirmation ("RESTORE" to proceed)
- [x] **BKUP-05**: System creates automatic backup before any restore operation
- [x] **BKUP-06**: Backup metadata includes file size, creation date, and table count

### SMTP & User Lifecycle

- [x] **SMTP-01**: Mailpit container captures all emails in development
- [x] **SMTP-02**: API endpoint tests SMTP connection and returns status
- [x] **SMTP-03**: User registration flow works end-to-end with email capture
- [x] **SMTP-04**: Email confirmation flow works end-to-end
- [x] **SMTP-05**: Password reset flow works end-to-end

### Production Docker

- [x] **PROD-01**: Production Docker build with 4 API workers validated
- [x] **PROD-02**: Connection pool sized correctly for multi-worker setup
- [x] **PROD-03**: Extended health check (/api/health/ready) verifies database connectivity
- [x] **PROD-04**: Makefile target for pre-flight production validation

### Docker Hardening (Phase 54)

- [x] **DOCKER-01**: Nginx image pinned to specific version (not `latest`)
- [x] **DOCKER-02**: Static asset caching configured with proper Cache-Control headers
- [x] **DOCKER-03**: Access logging enabled with buffered writes
- [x] **DOCKER-04**: security_opt no-new-privileges on all services
- [x] **DOCKER-05**: CPU resource limits configured on all services
- [x] **DOCKER-06**: Log rotation configured on all services
- [x] **DOCKER-07**: Brotli compression enabled in nginx
- [x] **DOCKER-08**: Graceful shutdown handler in API

## Traceability

Which phases cover which requirements.

| Requirement | Phase | Status |
|-------------|-------|--------|
| MIGR-01 | Phase 47 | Complete |
| MIGR-02 | Phase 47 | Complete |
| MIGR-03 | Phase 47 | Complete |
| MIGR-04 | Phase 48 | Complete |
| MIGR-05 | Phase 47 | Complete |
| MIGR-06 | Phase 48 | Complete |
| BKUP-01 | Phase 49 | Complete |
| BKUP-02 | Phase 50 | Complete |
| BKUP-03 | Phase 49 | Complete |
| BKUP-04 | Phase 50 | Complete |
| BKUP-05 | Phase 49 | Complete |
| BKUP-06 | Phase 49 | Complete |
| SMTP-01 | Phase 51 | Complete |
| SMTP-02 | Phase 51 | Complete |
| SMTP-03 | Phase 52 | Complete |
| SMTP-04 | Phase 52 | Complete |
| SMTP-05 | Phase 52 | Complete |
| PROD-01 | Phase 53 | Complete |
| PROD-02 | Phase 53 | Complete |
| PROD-03 | Phase 53 | Complete |
| PROD-04 | Phase 53 | Complete |
| DOCKER-01 | Phase 54 | Complete |
| DOCKER-02 | Phase 54 | Complete |
| DOCKER-03 | Phase 54 | Complete |
| DOCKER-04 | Phase 54 | Complete |
| DOCKER-05 | Phase 54 | Complete |
| DOCKER-06 | Phase 54 | Complete |
| DOCKER-07 | Phase 54 | Complete |
| DOCKER-08 | Phase 54 | Complete |

**Coverage:**
- v9.0 requirements: 29 total
- Mapped to phases: 29 (100%)
- All requirements: Complete (29/29)

---
*Requirements defined: 2026-01-29*
*Milestone shipped: 2026-01-31*
